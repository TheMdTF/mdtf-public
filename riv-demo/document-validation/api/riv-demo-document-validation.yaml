openapi: 3.0.3
info:
  title: The Maryland Test Facility Document Validation Interface - OpenAPI 3.0
  description: >-
    This documents the API requirements for MdTF testing of document validation
    algorithms.  Document validation testing at the MdTF is supported by the
    Department of Homeland Security Science and Technology Directorate (DHS
    S&T).  For more information please visit
    [https://mdtf.org](https://mdtf.org) and
    [https://www.dhs.gov/science-and-technology/BI-TC](https://www.dhs.gov/science-and-technology/BI-TC).
  contact:
    email: info@mdtf.org
  license:
    name: Apache 2.0
    url: http://www.apache.org/licenses/LICENSE-2.0.html
  version: 1.0.0
tags:
  - name: info
    description: Return information about the document validation algorithm
  - name: validate
    description: Return validation decision based on images of an identity document
paths:
  /v1/info:
    get:
      tags:
        - info
      summary: Return information about the document validation algorithm
      description: Return information about the validation algorithm
      operationId: info
      responses:
        '200':
          description: Successful operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Info'
  /v1/validate:
    post:
      tags:
        - validate
      summary: Validate an identity document based on images
      description:  >-
        Receive base64 encoded PNG images of the front and back of a document.
        Validation requires that the document is judged to be authentic.
        See [NIST SP 800-63A](https://pages.nist.gov/800-63-3-Implementation-Resources/63A/ial2remote/) Section A.10.2: Identity Validation for recommended best practices.
      requestBody:
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CapturedDocument'
        required: true
      responses:
        '200':
          description: Successful validation operation
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationResponse'
        '405':
          description: Validation error
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/ValidationErrorResponse'
components:
  schemas:
    Info:
      type: object
      properties:
        algorithmName:
          description: Algorithm name
          type: string
          example: docvalidate
        algorithmVersion:
          description: Algorithm version identifier
          type: string
          example: 1.0.0
        companyName:
          description: Company name
          type: string
          example: IDSL
        technicalContactEmail:
          description: eMail of the technical contact
          type: string
          example: info@mdtf.org
        recommendedCPUs:
          description: The recommended allocation of CPUs for the deployed docker container
          type: number
          format: int64
          example: 4
        recommendedMem:
          description: >-
            The recommended allocation of memory (MB) for the deployed docker
            container
          type: number
          format: int64
          example: 256
        test:
          description: The name of the test event
          type: string
          example: 2023 Document Validation Demonstration
    CapturedDocument:
      type: object
      properties:
        front:
          type: string
          example: base64 example
        back:
          type: string
          example: base64 example
    ValidationResponse:
      type: object
      properties:
        valid:
          description: >-
            Whether the document is determined to be valid (True) or invalid
            (False)
          type: boolean
          example: true
        score:
          description: >-
            A score corresponding to the level of confidence that the document
            is valid ranging between 0 and 1
          type: number
          format: double
          example: 0.8
        vector:
          description: >-
            Key value pairs describing document properties and their
            relationship to the validity decision
          type: array
          items:
            type: object
            properties:
              property:
                type: string
                example: checkSumsCorrect
              value:
                type: string
                example: 'Yes'
          example:
            - property: documentLivenessCheck
              value: 'Passed'
            - property: documentInformationFormatCorrect
              value: true
            - property: documentInformationCorrect
              value: true
            - property: documentInformationComplete
              value: true
            - property: documentCheckSumsCorrect
              value: true
            - property: documentMRZCorrect
              value: true
            - property: documentPhotoTampered
              value: true
            - property: documentSecurityFeaturesTampered
              value: None
            - property: documentDataFieldsTampered
              value: Age changed
    ValidationErrorResponse:
      type: object
      properties:
        error:
          type: string
          example: Failed to find document
    ValidationItem:
      type: object
      properties:
        property:
          type: string
          example: checkSumsCorrect
        value:
          type: string
          example: 'Yes'